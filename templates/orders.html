{% extends "base.html" %}
{% block content %}

<div class="card">
  <h2>üßæ Previous Orders</h2>

 <form method="get" class="search-bar">
  <select name="field" required>
    <option value="order_id"
      {% if request.args.get('field') == 'order_id' %}selected{% endif %}>
      Order ID
    </option>
    <option value="order_date"
      {% if request.args.get('field') == 'order_date' %}selected{% endif %}>
      Date (YYYY-MM-DD)
    </option>
    <option value="order_status"
      {% if request.args.get('field') == 'order_status' %}selected{% endif %}>
      Status
    </option>
    <option value="order_type"
      {% if request.args.get('field') == 'order_type' %}selected{% endif %}>
      Type
    </option>
    <option value="table_id"
      {% if request.args.get('field') == 'table_id' %}selected{% endif %}>
      Table
    </option>
    <option value="total"
      {% if request.args.get('field') == 'total' %}selected{% endif %}>
      Total
    </option>
  </select>

  <input
    type="text"
    name="search"
    placeholder="Search‚Ä¶"
    value="{{ request.args.get('search', '') }}"
    required
  >

</form>

  {% if orders %}
  <table>
    <tr>
      <th>Order</th>
      <th>Date</th>
      <th>Type</th>
      <th>Table</th>
      <th>Status</th>
      <th>Total</th>
      <th>Action</th>
    </tr>

    {% for o in orders %}
    <tr>
      <td>#{{ o.order_id }}</td>
      <td>{{ o.order_date }}</td>
      <td>{{ o.order_type }}</td>
      <td>{{ o.table_id or "‚Äî" }}</td>
      <td><b>{{ o.order_status }}</b></td>
      <td>{{ o.total }}</td>
      <td>
        <a href="/order/{{ o.order_id }}">Open</a>
      </td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p class="empty">No orders yet.</p>
  {% endif %}

  {% if request.args.get('search') %}
  <a href="{{ url_for('orders_list') }}" class="btn-secondary">
    ‚Üê Back to Orders
  </a>
{% endif %}

</div>

{% endblock %}
